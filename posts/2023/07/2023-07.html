<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Paul Foster">
<meta name="dcterms.date" content="2024-04-03">
<meta name="description" content="Easy puzzle evaluating simplified poker hands.">

<title>Paul Foster - Advent of Code - 2023 Day 7</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../posts/2023/06/2023-06.html" rel="prev">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Paul Foster - Advent of Code</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/pf981/pf981.github.io" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://stackoverflow.com/users/1751961/paul" rel="" target=""><i class="bi bi-stack-overflow" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/paulfoster01/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../posts/2023/01/2023-01.html">2023</a></li><li class="breadcrumb-item"><a href="../../../posts/2023/07/2023-07.html">7. Camel Cards</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">2023</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023/01/2023-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Trebuchet?!</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023/02/2023-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Cube Conundrum</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023/03/2023-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Gear Ratios</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023/04/2023-04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. Scratchcards</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023/05/2023-05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. If You Give A Seed A Fertilizer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023/06/2023-06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Wait For It</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023/07/2023-07.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">7. Camel Cards</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#part-1-hand-hierarchy" id="toc-part-1-hand-hierarchy" class="nav-link active" data-scroll-target="#part-1-hand-hierarchy">Part 1 <small class="text-body-secondary">Hand Hierarchy</small></a></li>
  <li><a href="#part-2-jokers-wild" id="toc-part-2-jokers-wild" class="nav-link" data-scroll-target="#part-2-jokers-wild">Part 2 <small class="text-body-secondary">Jokers Wild</small></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2023 Day 7</h1>
<p class="subtitle lead">Camel Cards</p>
  <div class="quarto-categories">
    <div class="quarto-category">python</div>
    <div class="quarto-category">easy</div>
  </div>
  </div>

<div>
  <div class="description">
    Easy puzzle evaluating simplified poker hands.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Paul Foster </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 3, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="hidden">
<p><span class="math display">\[
\newcommand{\blue}[1]{\color{##1577A0}\textbf{#1}\color{##55595C}}
\newcommand{\orange}[1]{\color{##91672C}\textbf{#1}\color{##55595C}}
\newcommand{\red}[1]{\color{##BE4844}\textbf{#1}\color{##55595C}}
\newcommand{\green}[1]{\color{##2F7E4A}\textbf{#1}\color{##55595C}}
\newcommand{\grey}[1]{\color{##969696}{#1}\color{##55595C}}
\newcommand{\greyred}[1]{\color{##f27d79}{#1}\color{##55595C}}
\newcommand{\greygreen}[1]{\color{##7ec295}{#1}\color{##55595C}}
\newcommand{\greyblue}[1]{\color{##76acc2}{#1}\color{##55595C}}
\newcommand{\plus}{\smash{\lower{0.5pc}\grey{+}}}
\]</span></p>
</div>
<p>Ho ho ho, fellow adventurers!</p>
<p><a href="https://adventofcode.com/2023/day/7">Advent of Code day 7</a> invites us to play a game of Camel Cards. In this simplified version of poker, we must evaluate and rank hands.</p>
<p>First, we’ll read the input.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"input.txt"</span>, <span class="st">"r"</span>) <span class="im">as</span> f:</span>
<span id="cb1-2"><a href="#cb1-2"></a>    lines <span class="op">=</span> f.readlines()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="part-1-hand-hierarchy" class="level2">
<h2 class="anchored" data-anchor-id="part-1-hand-hierarchy">Part 1 <small class="text-body-secondary">Hand Hierarchy</small></h2>
<div class="p-0" style="min-width: fit-content;">
<div class="card border-secondary mb-3 mx-auto">
  <div class="card-body p-3 m-1 pb-0 mb-0">
    <h4 class="card-title mt-0 anchored">Task 1</h4>
<p>You are given a list of 5 card hands and their corresponding <b class="fw-bold" style="color: #2F7E4A;">bids</b>. <b class="fw-bold" style="color: #1577A0;">Rank</b> each hand and calculate the winnings as the product of the <b class="fw-bold" style="color: #1577A0;">rank</b> and <b class="fw-bold" style="color: #2F7E4A;">bid</b>. Compute the <b class="fw-bold" style="color: #91672C;">total winnings</b>.</p>
<p>Hands are <b class="fw-bold" style="color: #1577A0;">ranked</b> by their type. If two hands are of the same type, their ordering is then determined by comparing the strength of the individual cards, starting from the first card to the fifth, as needed.</p>
<p>Hand types are ranked as follows:</p>
<ol type="1">
<li>High card</li>
<li>One pair</li>
<li>Two pair</li>
<li>Three of a kind</li>
<li>Full house</li>
<li>Four of a kind</li>
<li>Five of a kind</li>
</ol>
<h6 class="card-subtitle text-muted anchored">
Example
</h6>
<!-- &{\text{Hand}} &&{\text{Bid}} &&{\text{\grey{Rank}}} &&{\text{\grey{Type}}}\phantom{\Huge{G}}&{\text{\grey{Winnings}}} &\\ -->
<p><span class="math display">\[
\begin{aligned}
&amp;{\text{Hand}} &amp;&amp;{\text{Bid}} &amp;&amp;{\text{\grey{Rank}}} &amp;&amp;{\text{\grey{Type}}}\phantom{\Huge{g}}&amp;{\text{\grey{Winnings}}} &amp;\\
&amp;\text{32T3K} &amp;&amp;\green{765} &amp;&amp;\greyblue{1} &amp;&amp;\text{\grey{One pair}}          &amp;\greygreen{765} \,\grey{\times}\, \greyblue{1}                                                        &amp;\plus\\
&amp;\text{T55J5} &amp;&amp;\green{684} &amp;&amp;\greyblue{4} &amp;&amp;\text{\grey{Full house}}        &amp;\greygreen{684} \,\grey{\times}\, \greyblue{4}                                                        &amp;\plus\\
&amp;\text{KK677} &amp;&amp;\green{28}  &amp;&amp;\greyblue{3} &amp;&amp;\text{\grey{Two pair}} &amp; \greygreen{28} \,\grey{\times}\, \greyblue{3}                                                        &amp;\plus\\
&amp;\text{KTJJT} &amp;&amp;\green{220} &amp;&amp;\greyblue{2} &amp;&amp;\text{\grey{Two pair}}\grey{^*}          &amp;\greygreen{220} \,\grey{\times}\, \greyblue{2}                                                        &amp;\plus\\
&amp;\text{QQQJA} &amp;&amp;\green{483} &amp;&amp;\greyblue{5} &amp;&amp;\text{\grey{Three of a kind}}   &amp;\greygreen{483} \,\grey{\times}\, \greyblue{5} \llap{\lower{0.4pc}\underline{\phantom{483 \times 5}}} &amp;\\
&amp;             &amp;&amp;            &amp;&amp;             &amp;&amp;                                &amp;\orange{6440}                                                                                         &amp;\\
\end{aligned}
\]</span></p>
<p><span class="math inline">\(\grey{\scriptsize{^{*}\text{Second card ranks lower than other two pair's second card}}}\)</span></p>
  </div>
</div>
</div>
<div style="clear: both;">

</div>
<p>We’ll need a mechanism to rank hands. First, we define a function, <code>primary_order</code>, which ranks the hand’s type. This is accomplished by analysing the frequency of each card in the hand, allowing us to classify the hand based on predefined patterns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="im">import</span> collections</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">def</span> primary_order(hand):</span>
<span id="cb2-5"><a href="#cb2-5"></a>    counts <span class="op">=</span> [count <span class="cf">for</span> card, count <span class="kw">in</span> collections.Counter(hand).most_common()]</span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a>    possible_counts <span class="op">=</span> [</span>
<span id="cb2-8"><a href="#cb2-8"></a>        [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>],  <span class="co"># High card</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>        [<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>],  <span class="co"># One pair</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>        [<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>],  <span class="co"># Two pair</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>        [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>],  <span class="co"># Three of a kind</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>        [<span class="dv">3</span>, <span class="dv">2</span>],  <span class="co"># Full house</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>        [<span class="dv">4</span>, <span class="dv">1</span>],  <span class="co"># Four of a kind</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>        [<span class="dv">5</span>],  <span class="co"># Five of a kind</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>    ]</span>
<span id="cb2-16"><a href="#cb2-16"></a></span>
<span id="cb2-17"><a href="#cb2-17"></a>    <span class="cf">return</span> possible_counts.index(counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we define a function, <code>secondary_order</code>, which ranks hands based on the individual card values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">def</span> secondary_order(hand):</span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="cf">return</span> <span class="bu">tuple</span>(<span class="st">"23456789TJQKA"</span>.index(card) <span class="cf">for</span> card <span class="kw">in</span> hand)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, define <code>hand_bid_order</code> as the combination of the primary and secondary orderings. Python makes it easy to combine and apply our primary and secondary orderings. We can provide <code>sort</code> a <code>key</code> function which takes an element and returns a <code>tuple</code> of the primary and secondary orderings.</p>
<p>Calculate the <b class="fw-bold" style="color: #91672C;">total winnings</b> as the sum of bids multiplied by the <b class="fw-bold" style="color: #1577A0;">rank</b>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">def</span> hand_bid_order(hand_bid):</span>
<span id="cb4-2"><a href="#cb4-2"></a>    hand, bid <span class="op">=</span> hand_bid</span>
<span id="cb4-3"><a href="#cb4-3"></a>    <span class="cf">return</span> primary_order(hand), secondary_order(hand)</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a></span>
<span id="cb4-6"><a href="#cb4-6"></a>hands_bids <span class="op">=</span> [line.split(<span class="st">" "</span>) <span class="cf">for</span> line <span class="kw">in</span> lines]</span>
<span id="cb4-7"><a href="#cb4-7"></a>hands_bids.sort(key<span class="op">=</span>hand_bid_order)</span>
<span id="cb4-8"><a href="#cb4-8"></a>answer1 <span class="op">=</span> <span class="bu">sum</span>(i <span class="op">*</span> <span class="bu">int</span>(bid) <span class="cf">for</span> i, (_, bid) <span class="kw">in</span> <span class="bu">enumerate</span>(hands_bids, <span class="dv">1</span>))</span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="bu">print</span>(answer1)</span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt; 6440</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="card border-info mb-3 mx-auto">
  <div class="card-header text-white bg-info">Key Points</div>
  <div class="card-body p-1">
    <p class="card-text">
</p><ul>
<li>Ranking Camel Cards hands involves two levels of ordering:
<ol type="1">
<li><strong>Primary ordering</strong> is based on the type of hand, determined by the pattern of card frequencies</li>
<li><strong>Secondary ordering</strong> evaluates the specific values of the cards within a hand</li>
</ol></li>
<li>A combined key function, <code>hand_bid_order</code>, uses both the primary and secondary orderings to sort the hands from weakest to strongest</li>
</ul>
    <p></p>
  </div>
</div>
</section>
<section id="part-2-jokers-wild" class="level2">
<h2 class="anchored" data-anchor-id="part-2-jokers-wild">Part 2 <small class="text-body-secondary">Jokers Wild</small></h2>
<div class="p-0" style="min-width: fit-content;">
<div class="pe-4">
<div class="card border-secondary mb-3 mx-auto">
  <div class="card-body p-3 m-1 pb-0 mb-0">
    <h4 class="card-title mt-0 anchored">Task 2</h4>
<p><b class="fw-bold" style="color: #BE4844;">J</b>s are now wild <b class="fw-bold" style="color: #BE4844;">Jokers</b> and act as whatever card results in the <strong>strongest type</strong>.</p>
<p>Determine the new hand <b class="fw-bold" style="color: #1577A0;">ranks</b> and compute the <b class="fw-bold" style="color: #91672C;">total winnings</b>.</p>
<h6 class="card-subtitle text-muted anchored">
Example
</h6>
<p><span class="math display">\[
\begin{aligned}
&amp;{\text{Hand}}      &amp;&amp;{\text{Bid}} &amp;&amp;{\text{\grey{Rank}}} &amp;&amp;{\text{\grey{Type}}}\phantom{\Huge{g}}&amp;{\text{\grey{Winnings}}} &amp;\\
&amp;\text{32T3K}       &amp;&amp;\green{765} &amp;&amp;\greyblue{1} &amp;&amp;\text{\grey{One pair}}          &amp;\greygreen{765} \,\grey{\times}\, \greyblue{1}                                                        &amp;\plus\\
&amp;\text{T55\red{J}5} &amp;&amp;\green{684} &amp;&amp;\greyblue{3} &amp;&amp;\text{\grey{Four of a kind}}        &amp;\greygreen{684} \,\grey{\times}\, \greyblue{3}                                                        &amp;\plus\\
&amp;\text{KK677}       &amp;&amp;\green{28}  &amp;&amp;\greyblue{2} &amp;&amp;\text{\grey{Two pair}} &amp; \greygreen{28} \,\grey{\times}\, \greyblue{2}                                                        &amp;\plus\\
&amp;\text{KT\red{JJ}T} &amp;&amp;\green{220} &amp;&amp;\greyblue{5} &amp;&amp;\text{\grey{Four of a kind}}          &amp;\greygreen{220} \,\grey{\times}\, \greyblue{5}                                                        &amp;\plus\\
&amp;\text{QQQ\red{J}A} &amp;&amp;\green{483} &amp;&amp;\greyblue{4} &amp;&amp;\text{\grey{Four of a kind}}   &amp;\greygreen{483} \,\grey{\times}\, \greyblue{4} \llap{\lower{0.4pc}\underline{\phantom{483 \times 4}}} &amp;\\
&amp;                   &amp;&amp;            &amp;&amp;             &amp;&amp;                                &amp;\orange{5905}                                                                                         &amp;\\
\end{aligned}
\]</span></p>
  </div>
</div>
</div>
</div>
<div style="clear: both;">

</div>
<p>Create a new function, <code>hand_bid_order_wild</code>, which evaluates the maximum potential strength of a hand by considering all possible substitutions of <b class="fw-bold" style="color: #BE4844;">J</b> with other cards.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">def</span> hand_bid_order_wild(hand_bid):</span>
<span id="cb5-2"><a href="#cb5-2"></a>    hand, bid <span class="op">=</span> hand_bid</span>
<span id="cb5-3"><a href="#cb5-3"></a>    <span class="cf">return</span> (</span>
<span id="cb5-4"><a href="#cb5-4"></a>        <span class="bu">max</span>(primary_order(hand.replace(<span class="st">"J"</span>, c)) <span class="cf">for</span> c <span class="kw">in</span> <span class="st">"23456789TQKA"</span>),</span>
<span id="cb5-5"><a href="#cb5-5"></a>        secondary_order(hand),</span>
<span id="cb5-6"><a href="#cb5-6"></a>    )</span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a></span>
<span id="cb5-9"><a href="#cb5-9"></a>hands_bids.sort(key<span class="op">=</span>hand_bid_order_wild)</span>
<span id="cb5-10"><a href="#cb5-10"></a>answer2 <span class="op">=</span> <span class="bu">sum</span>(i <span class="op">*</span> <span class="bu">int</span>(bid) <span class="cf">for</span> i, (_, bid) <span class="kw">in</span> <span class="bu">enumerate</span>(hands_bids, <span class="dv">1</span>))</span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="bu">print</span>(answer2)</span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt; 5905</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="card border-info mb-3 mx-auto">
  <div class="card-header text-white bg-info">Key Points</div>
  <div class="card-body p-1">
    <p class="card-text">
</p><ul>
<li>Compute the max <code>primary_order</code> when replacing <b class="fw-bold" style="color: #BE4844;">J</b>s with every other card</li>
<li><b class="fw-bold" style="color: #BE4844;">Jokers</b> only affect the <code>primary_order</code> - the <code>secondary_order</code> is calculated the same way</li>
</ul>
    <p></p>
  </div>
</div>
<!-- Buttons -->
<div class="d-grid gap-2 d-md-flex justify-content-md-end">

  <!-- Problem Button -->
  <a type="button" class="btn btn-secondary" href="https://adventofcode.com/2023/day/7" role="button">
    <i class="bi bi-box-arrow-up-right"></i> Problem
  </a>

  <!-- Input Button -->
  <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#inputModal">
    <i class="bi bi-file-earmark-text"></i> Input
  </button>

  <!-- Solution Modal Button -->
  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#solutionModal">
    <i class="bi bi-code-slash"></i> Full Solution
  </button>

</div>


<!-- Input Modal -->
<div class="modal fade" id="inputModal" tabindex="-1" aria-labelledby="inputModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable modal-xl">
<div class="modal-content">
<div class="modal-header">
  <h5 class="modal-title anchored" id="inputModalLabel">2023 Day 7 Input</h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
<div class="cell" data-file="input.txt">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>32T3K <span class="dv">765</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>T55J5 <span class="dv">684</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>KK677 <span class="dv">28</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>KTJJT <span class="dv">220</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>QQQJA <span class="dv">483</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>


<!-- Solution Modal -->
<div class="modal fade" id="solutionModal" tabindex="-1" aria-labelledby="solutionModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable modal-xl">
<div class="modal-content">
<div class="modal-header">
  <h5 class="modal-title anchored" id="solutionModalLabel">2023 Day 7 Full Solution</h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
<div class="cell" data-file="solution.py">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>import collections</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a>with <span class="fu">open</span>(<span class="st">"input.txt"</span>, <span class="st">"r"</span>) as f<span class="sc">:</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>    lines <span class="ot">=</span> <span class="fu">f.read</span>()<span class="fu">.splitlines</span>()</span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a>def <span class="fu">primary_order</span>(hand)<span class="sc">:</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>    counts <span class="ot">=</span> [count <span class="cf">for</span> card, count <span class="cf">in</span> <span class="fu">collections.Counter</span>(hand)<span class="fu">.most_common</span>()]</span>
<span id="cb7-10"><a href="#cb7-10"></a></span>
<span id="cb7-11"><a href="#cb7-11"></a>    possible_counts <span class="ot">=</span> [</span>
<span id="cb7-12"><a href="#cb7-12"></a>        [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>],  <span class="co"># High card</span></span>
<span id="cb7-13"><a href="#cb7-13"></a>        [<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>],  <span class="co"># One pair</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>        [<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>],  <span class="co"># Two pair</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>        [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>],  <span class="co"># Three of a kind</span></span>
<span id="cb7-16"><a href="#cb7-16"></a>        [<span class="dv">3</span>, <span class="dv">2</span>],  <span class="co"># Full house</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>        [<span class="dv">4</span>, <span class="dv">1</span>],  <span class="co"># Four of a kind</span></span>
<span id="cb7-18"><a href="#cb7-18"></a>        [<span class="dv">5</span>],  <span class="co"># Five of a kind</span></span>
<span id="cb7-19"><a href="#cb7-19"></a>    ]</span>
<span id="cb7-20"><a href="#cb7-20"></a></span>
<span id="cb7-21"><a href="#cb7-21"></a>    return <span class="fu">possible_counts.index</span>(counts)</span>
<span id="cb7-22"><a href="#cb7-22"></a></span>
<span id="cb7-23"><a href="#cb7-23"></a></span>
<span id="cb7-24"><a href="#cb7-24"></a>def <span class="fu">secondary_order</span>(hand)<span class="sc">:</span></span>
<span id="cb7-25"><a href="#cb7-25"></a>    return <span class="fu">tuple</span>(<span class="st">"23456789TJQKA"</span><span class="fu">.index</span>(card) <span class="cf">for</span> card <span class="cf">in</span> hand)</span>
<span id="cb7-26"><a href="#cb7-26"></a></span>
<span id="cb7-27"><a href="#cb7-27"></a></span>
<span id="cb7-28"><a href="#cb7-28"></a>def <span class="fu">hand_bid_order</span>(hand_bid)<span class="sc">:</span></span>
<span id="cb7-29"><a href="#cb7-29"></a>    hand, bid <span class="ot">=</span> hand_bid</span>
<span id="cb7-30"><a href="#cb7-30"></a>    return <span class="fu">primary_order</span>(hand), <span class="fu">secondary_order</span>(hand)</span>
<span id="cb7-31"><a href="#cb7-31"></a></span>
<span id="cb7-32"><a href="#cb7-32"></a></span>
<span id="cb7-33"><a href="#cb7-33"></a>hands_bids <span class="ot">=</span> [<span class="fu">line.split</span>(<span class="st">" "</span>) <span class="cf">for</span> line <span class="cf">in</span> lines]</span>
<span id="cb7-34"><a href="#cb7-34"></a><span class="fu">hands_bids.sort</span>(<span class="at">key=</span>hand_bid_order)</span>
<span id="cb7-35"><a href="#cb7-35"></a>answer1 <span class="ot">=</span> <span class="fu">sum</span>(i <span class="sc">*</span> <span class="fu">int</span>(bid) <span class="cf">for</span> i, (_, bid) <span class="cf">in</span> <span class="fu">enumerate</span>(hands_bids, <span class="dv">1</span>))</span>
<span id="cb7-36"><a href="#cb7-36"></a><span class="fu">print</span>(answer1)</span>
<span id="cb7-37"><a href="#cb7-37"></a></span>
<span id="cb7-38"><a href="#cb7-38"></a></span>
<span id="cb7-39"><a href="#cb7-39"></a><span class="co"># Part 2</span></span>
<span id="cb7-40"><a href="#cb7-40"></a>def <span class="fu">hand_bid_order_wild</span>(hand_bid)<span class="sc">:</span></span>
<span id="cb7-41"><a href="#cb7-41"></a>    hand, bid <span class="ot">=</span> hand_bid</span>
<span id="cb7-42"><a href="#cb7-42"></a>    <span class="fu">return</span> (</span>
<span id="cb7-43"><a href="#cb7-43"></a>        <span class="fu">max</span>(<span class="fu">primary_order</span>(<span class="fu">hand.replace</span>(<span class="st">"J"</span>, c)) <span class="cf">for</span> c <span class="cf">in</span> <span class="st">"23456789TQKA"</span>),</span>
<span id="cb7-44"><a href="#cb7-44"></a>        <span class="fu">secondary_order</span>(hand),</span>
<span id="cb7-45"><a href="#cb7-45"></a>    )</span>
<span id="cb7-46"><a href="#cb7-46"></a></span>
<span id="cb7-47"><a href="#cb7-47"></a></span>
<span id="cb7-48"><a href="#cb7-48"></a><span class="fu">hands_bids.sort</span>(<span class="at">key=</span>hand_bid_order_wild)</span>
<span id="cb7-49"><a href="#cb7-49"></a>answer2 <span class="ot">=</span> <span class="fu">sum</span>(i <span class="sc">*</span> <span class="fu">int</span>(bid) <span class="cf">for</span> i, (_, bid) <span class="cf">in</span> <span class="fu">enumerate</span>(hands_bids, <span class="dv">1</span>))</span>
<span id="cb7-50"><a href="#cb7-50"></a><span class="fu">print</span>(answer2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="modal-footer">
<small><i>Execution took 0.01 seconds</i></small>
</div>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../posts/2023/06/2023-06.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">6. Wait For It</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© Paul Foster, 2024</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>