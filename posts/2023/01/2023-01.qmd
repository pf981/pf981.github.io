---
title: "2023 Day 01"
subtitle: "Trebuchet?!"
date: 2023-12-01
categories: [python, easy]
draft: false
# This doesn't work when I put it in _metadata.yml
knitr:
  opts_chunk: 
    comment: "#>"
    collapse: true
problem_url: "https://adventofcode.com/2023/day/1"
---

Ho ho ho, fellow adventurers! [Advent of Code's day 1]({{< meta problem_url >}}) has catapulted us into a realm of medieval engineering.

```{python}
with open('input.txt', "r") as f:
    lines = f.readlines()
```

## Part 1 <small class="text-body-secondary">Deciphering Trebuchet Calibration Instructions</small>

::: {.hidden}
$$
% \underline doesn't support thickness, so I just redraw the underline slightly offset three times
\newcommand{\thickul}[2]{%
\large{\textbf{#2}}%
\color{#1}%
\llap{\underline{\phantom{\large{\textbf{#2}}}}}%
\llap{\underline{\lower{.05ex}\phantom{\large{\textbf{#2}}}}}%
\llap{\underline{\lower{.1ex}\phantom{\large{\textbf{#2}}}}}%
\llap{\underline{\lower{.15ex}\phantom{\large{\textbf{#2}}}}}%
\color{##55595C}\normalsize%
}
$$

$$
\newcommand{\first}[1]{\thickul{##2F7E4A}{#1}}
$$

$$
\newcommand{\last}[1]{\thickul{##1577A0}{#1}}
$$

$$
\newcommand{\both}[1]{%
\thickul{##2F7E4A}{#1}%
\color{##1577A0}%
\llap{\underline{\lower{1ex}\phantom{\large{\textbf{#1}}}}}%
\llap{\underline{\lower{1.05ex}\phantom{\large{\textbf{#1}}}}}%
\llap{\underline{\lower{1.1ex}\phantom{\large{\textbf{#1}}}}}%
\llap{\underline{\lower{1.15ex}\phantom{\large{\textbf{#1}}}}}%
\color{##55595C}\normalsize%
}
$$
:::

```{=html}
<div class="card border-secondary mb-3 mx-auto" style="max-width: 20rem;">
  <div class="card-body p-3 m-1">
    <h4 class="card-title mt-0">Task</h4>
    <p class="card-text">
```

Combine the <u class='fw-bold' style='text-decoration-thickness: 2px;color: #2F7E4A;'>first</u> and <u class='fw-bold' style='text-decoration-thickness: 2px;color: #1577A0;'>last</u> digit of each string and get the <b class='fw-bold' style='color: #91672C;'>sum</b>.

<h6 class="card-subtitle text-muted">Example</h6>

$$
\begin{aligned}
\first{1}\text{abc}\last{2} & ~~~~~ & \color{#969696}21 & \smash{\lower{0.5pc}\color{#969696}+}\\
\text{pqr}\first{3}\text{stu}\last{8}\text{vwx} & & \color{#969696}38 & \smash{\lower{0.5pc}\color{#969696}+}\\
\text{a}\first{1}\text{b2c3d4e}\last{5}\text{f} & & \color{#969696}15 & \smash{\lower{0.5pc}\color{#969696}+}\\
\text{treb}\both{7}\text{uchet} & & \color{#969696}77\llap{\lower{0.4pc}\underline{\phantom{\large{\textbf{151}}}}} & \\
 & & \color{#91672C}\large{\textbf{151}} &\\
\end{aligned}
$$


```{=html}
    </p>
  </div>
</div>
```


```{python}
def first_value(line, m):
  for i, _ in enumerate(line):
    for text, val in m.items():
      if line[i:].startswith(text):
        return val


m = {c: int(c) for c in '123456789'}

answer1 = sum(10 * first_value(line, m) + first_value(line[::-1], m) for line in lines)
print(answer1)
```

```{=html}
<div class="card border-info mb-3 mx-auto" style="max-width: 30rem;">
  <div class="card-header text-white bg-info">Key Points</div>
  <div class="card-body p-1">
    <p class="card-text">
```

* `m` maps digit characters to their integer values
* `first_value` finds the first substring that starts with any key of `m` and returns its value
* The string is reversed to find the last value

```{=html}
    </p>
  </div>
</div>
```

## Part 2

```{python}
words = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine']
m.update({text: i for i, text in enumerate(words, 1)})
rev_m = {text[::-1]: value for text, value in m.items()}

answer2 = sum(10 * first_value(line, m) + first_value(line[::-1], rev_m) for line in lines)
print(answer2)
```

```{=html}
<div class="card border-info mb-3 mx-auto" style="max-width: 30rem;">
  <div class="card-header text-white bg-info">Key Points</div>
  <div class="card-body p-1">
    <p class="card-text">
```

* ...
* ...

```{=html}
    </p>
  </div>
</div>
```

{{< include ../../_button_footer.qmd >}}
